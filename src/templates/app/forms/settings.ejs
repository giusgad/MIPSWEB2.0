<form class="form settings" method="POST" id="settings-form" onsubmit="return saveSettings(event)">
    <div class="title">Settings</div>
    <div>
      <%ctx.possibleOptions.forEach(section => {%>
        <fieldset class="section">
          <legend class="title"><%=section.name%></legend>
          <%section.settings.forEach(opt => {
            const currVal = ctx.settings.options[opt.name]%>
            <div class="line">
              <label for="<%=opt.name%>"><%=opt.desc%></label>
              <%if (opt.help && opt.help !== "") {%>
                <div class="help" title="<%=opt.help%>">?</div>
              <%}%>
              <%switch (opt.inputType) {
                case "checkbox":%>
                  <input type="checkbox" id="<%=opt.name%>" name="<%=opt.name%>" <%=currVal?"checked":""%>/>
                <%break;
                case "dropdown":%>
                  <select id="<%=opt.name%>" name="<%=opt.name%>">
                    <%opt.dropdownOptions.forEach(o => {%>
                      <option value="<%=o.value%>" <%=currVal === o.value ? "selected" : ""%>>
                        <%=o.desc%>
                      </option>
                    <%})%>
                  </select>
              <%
              }
              %>
            </div>
          <%})%>
        </fieldset>
      <%})%>
      <fieldset class="section">
        <legend class="title">Flags</legend>
        <div class="line">
          <button type="button" class="button default" onclick="getOptionFlagsOnClick();">
            Get flags from current options
          </button>
        </div>
        <div class="line">
          <input type="text" id="option-tags" name="option-tags"></input>
          <button type="button" class="button default" onclick="setOptionsByFlagsOnClick();">
            Set options
          </button>
        </div>
      </fieldset>
    </div>
    <div class="buttons">
        <button class="button default" onclick="restoreOptions();hideFormOnClick();">
            <div class="icon gray-4"><%-Icons.render('x')%></div>
            <div class="label">Cancel</div>
        </button>
        <button class="button default" type="submit">
            <div class="icon gray-4"><%-Icons.render('save')%></div>
            <div class="label">Save settings</div>
        </button>
    </div>
</form>
