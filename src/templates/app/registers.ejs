<div class="component">
    <div class="title">Registers</div>
    <div class="button default toggle-btn <%=ctx.memoryShown ? "memory-shown" : ""%>" onclick="toggleMemoryOnClick();">
        <div class="icon gray-4"><%-ctx.memoryShown ? Icons.render('angleDown') : Icons.render('angleUp')%></div>
        <div class="label"><%= ctx.memoryShown ? "Hide memory" : "Show Memory"%></div>
    </div>
    <div class="table">
        <div class="cols-names">
            <div class="col name">
                <div class="col-format">
                    <%
                    const regNameValues = ["name", "number"]
                    let nameFormat = (ctx.settings.colsFormats && ctx.settings.colsFormats['registers-name-format']) || "name";
                    let currentName = regNameValues.indexOf(nameFormat) || 0;
                    %>
                    <button
                      type="button"
                      class="state-btn"
                      id="registers-name-format"
                      onclick="cycleStateBtn(this, colFormatSelectOnChange)"
                      data-values="<%=regNameValues%>"
                      data-current="<%=currentName%>"
                    ><%=getStateBtnText(nameFormat)%></button>
                </div>
            </div>
            <div class="col value">
                <div class="col-name">Value</div>
                <div class="col-format">
                    <%
                    const regValOptions = ["int", "hexadecimal", "binary"]
                    let valueFormat = (ctx.settings.colsFormats && ctx.settings.colsFormats['registers-value-format']) || "int";
                    let currentVal = regValOptions.indexOf(valueFormat) || 0;
                    %>
                    <button
                      type="button"
                      class="state-btn"
                      id="registers-value-format"
                      onclick="cycleStateBtn(this, colFormatSelectOnChange)"
                      data-values="<%=regValOptions%>"
                      data-current="<%=currentVal%>"
                    ><%=getStateBtnText(valueFormat)%></button>
                </div>
            </div>
        </div>
        <div class="rows">
            <%ctx.vm.getRegisters().forEach((register) => {%>
                <div class="row 
                <% if ((ctx.vm.lastChangedRegister) && (ctx.vm.lastChangedRegister === register.name)) { %> last-changed <% } %>
                <% if ((ctx.vm.lastReadRegisters) && (ctx.vm.lastReadRegisters.includes(register.name))) { %> last-read <% } %>
                ">
                    <div class="col name">
                        <% if ((nameFormat === 'number') && (!['pc', 'hi', 'lo'].includes(register.name))) { %>
                        $<%=register.number%>
                        <% } else { %>
                        <%=register.name%>
                        <% } %>
                    </div>
                    <div class="col value <%=valueFormat%>">
                        <%=convert(valueFormat, register.binary)%>
                    </div>
                </div>
            <%});%>
        </div>
    </div>
</div>

